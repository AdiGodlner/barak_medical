<div class="chat-wrap"
    [class.open]="isChatOpen">
    
    <button class="open-button"
        (click)="open()"
        [class.hide]="isChatOpen"
        aria-label="open chatbot"
        >

            <svg
            width="33.6px"
            height="46.667px"
            viewBox="0 0 35 35"
            >
            <g id="surface1">
                <path style="stroke: none; fill-rule: nonzero; fill: rgb(255, 255, 255); fill-opacity: 1;" d="M 15.191406 0.289062 C 8.882812 1.242188 3.742188 5.296875 1.457031 11.121094 C -0.285156 15.5625 -0.0507812 20.644531 2.082031 24.945312 L 2.582031 25.949219 L 1.375 30.324219 C 0.714844 32.734375 0.183594 34.71875 0.207031 34.734375 C 0.226562 34.75 2.265625 34.238281 4.75 33.59375 L 9.265625 32.417969 L 10.183594 32.847656 C 14.949219 35.066406 20.433594 35.042969 25.125 32.773438 C 27.316406 31.714844 29.292969 30.167969 30.898438 28.257812 C 33.714844 24.914062 35.167969 20.421875 34.832031 16.09375 C 34.359375 9.929688 30.726562 4.566406 25.207031 1.894531 C 23.640625 1.132812 22.332031 0.710938 20.5 0.363281 C 19.507812 0.183594 16.234375 0.132812 15.191406 0.289062 Z M 20.101562 3.21875 C 21.449219 3.449219 22.75 3.890625 24.082031 4.558594 C 25.574219 5.3125 26.582031 6.039062 27.75 7.199219 C 30.425781 9.855469 31.824219 13.066406 31.976562 16.839844 C 32.089844 19.972656 31.199219 22.945312 29.332031 25.59375 C 28.535156 26.734375 26.839844 28.371094 25.667969 29.140625 C 23.207031 30.773438 20.890625 31.507812 18 31.582031 C 15.050781 31.664062 12.875 31.109375 10.035156 29.53125 L 9.691406 29.339844 L 7.058594 30.027344 C 5.617188 30.40625 4.390625 30.707031 4.351562 30.6875 C 4.308594 30.671875 4.589844 29.523438 4.976562 28.132812 C 5.351562 26.742188 5.667969 25.558594 5.667969 25.492188 C 5.667969 25.425781 5.523438 25.152344 5.339844 24.871094 C 3.074219 21.304688 2.550781 16.679688 3.957031 12.660156 C 5.375 8.636719 8.464844 5.46875 12.5 3.921875 C 13.640625 3.484375 14.800781 3.226562 16.5 3.027344 C 17.125 2.953125 19.175781 3.0625 20.101562 3.21875 Z M 20.101562 3.21875 "></path>
                <path style="stroke: none; fill-rule: nonzero; fill: rgb(255, 255, 255); fill-opacity: 1;" d="M 11.042969 9.449219 C 10.433594 9.613281 9.507812 10.714844 9.074219 11.789062 C 8.898438 12.230469 8.882812 12.417969 8.882812 13.445312 C 8.882812 14.578125 8.890625 14.621094 9.183594 15.421875 C 10.042969 17.707031 12.640625 20.882812 15.214844 22.804688 C 16.589844 23.828125 17.808594 24.433594 19.890625 25.128906 C 21.714844 25.734375 22.917969 25.714844 24.25 25.0625 C 25.207031 24.589844 25.898438 23.902344 26.117188 23.210938 C 26.324219 22.554688 26.390625 21.5625 26.242188 21.378906 C 26.007812 21.097656 22.457031 19.445312 22.089844 19.445312 C 21.808594 19.445312 21.824219 19.429688 20.992188 20.46875 C 20.214844 21.429688 19.964844 21.679688 19.742188 21.679688 C 19.410156 21.679688 17.949219 20.96875 17.074219 20.394531 C 16.632812 20.097656 15.957031 19.570312 15.582031 19.222656 C 14.484375 18.195312 13.25 16.515625 13.25 16.042969 C 13.25 15.902344 13.417969 15.648438 13.757812 15.257812 C 14.292969 14.652344 14.667969 14.023438 14.667969 13.734375 C 14.667969 13.570312 13.484375 10.632812 13.167969 10.011719 C 13.082031 9.855469 12.949219 9.664062 12.867188 9.589844 C 12.667969 9.417969 11.5 9.324219 11.042969 9.449219 Z M 11.042969 9.449219 "></path>
            </g>
        </svg>

        
    </button>

    <div class="chat"
        [class.closed] = "!isChatOpen">

        <h2 class="title">
             צ'אט בוט
        </h2>

        <button class="close-button"
            (click)="close()">
                X
                <!-- TODO add SVG insted of X  -->
        </button>


        <div class="chat-body-wrap">
           <div class="chat-body">

                @for (message of messages; track message){
                    
                    @if (message.from === 'user') {

                        <div class="message user">
                            <span> {{ message.text }} </span>
                            
                        </div>

                    } @else {
                        
                        <div class="message bot">
                            <span>{{ message.text }}</span>
                        @for ( chatButton of message.messageButtons; track chatButton) {
                            <div class="btns-flex">

                            @if ( chatButton.responseId ) {
                            <button class="message-button"
                            (click)="handleOnButtonClick(chatButton.responseId)">
                                {{chatButton.text}}
                            </button>
                            } @else{
                            
                            <a href="tel: +9720528723566">
                                <button class="message-button" >
                                    {{chatButton.text}}
                                </button>
                            </a>
                            }
                            </div>
                        }
                    
                        </div>

                    

                    }

                }
        
            </div>

        </div>
       
    </div>

</div>



